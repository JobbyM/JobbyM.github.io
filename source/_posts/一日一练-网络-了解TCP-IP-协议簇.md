---
title: 一日一练-网络 了解TCP/IP 协议簇
date: 2018-05-10 17:50:02
tags:
  - 技术
  - 一日一练
  - 网络
categories: 技术
---

> 子曰：了解TCP/IP
> 摘自《图解HTTP》 1.3 网络基础tcp/ip

## 协议（protocol）
计算机与网络设备要相互通信，双方就必须基于相同的方法。比如，如何探测到通信目标、由那一边先发起通信、使用那种语言进行通信、怎样结束通信等规则都需要事先确定。不同的硬件、操作系统之间的通信，所有的这一切都需要一种规则。我们就把这种规则称为协议（protocol）。

把与互联网相关联的协议集合起来总称为TCP/IP。

## TCP/IP 分层管理
TCP/IP 协议簇按层次分为以下4 层：应用层、传输层、网络层和数据链路层。

<!--more-->

TCP/IP 协议簇各层的作用如下：
**应用层**
应用层决定了向用户提供应用服务时通信的活动。
TCP/IP 协议簇内预存了各类通用的应用服务。比如，FTP（File Transfer Protocol，文件传输协议）和DNS（Domain Name System，域名系统）服务以及HTTP（HyperText Transfer Protocol，超文本传输协议）。

**传输层**
传输层对应用层提供处于网络连接中的两台计算机之间的数据传输。

在传输层有两个性质不同的协议：TCP（Transmission Control Protocol，传输控制协议）和UDP（User Data Protocol，用户数据报协议）。

**网络层**
网络层用来处理在网络上流动的数据包。数据包是网络传输的最小数据单位。该层规定了通过怎样的路径（所谓的传输路线）到达对方计算机，并把数据包传送给对方。

与对方计算机之间通过多态计算机或网络设备进行传输时，网络层所起的作用就是在众多的选项内选择一条传输路线。

**数据链路层（又名链路层、网络接口层）**
用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱动、NIC（Network Interface Card，网络适配器，即网卡），及光纤等物理可见部分。硬件上的范畴均在链路层的作用范围之内。

## TCP/IP 通信传输流
{% asset_img tcpip.jpg %}

用HTTP 来说明
1. 首先作为发送端的客户端在应用层（HTTP 协议）发出一个想看某个Web 页面的HTTP 请求。
2. 接着，为了传输方便，在传输层（TCP 协议）把从应用层收到的数据（HTTP 请求报文）进行分割，并在各个报文上打上标记序号及端口后转发给网络层。
3. 在网络层（IP 协议），增加作为通信目的地的MAC 地址后转发给链路层。这样，发往网络的通信请求就准备齐全了。
4. 接收端的服务器在链路层接收到数据，按序从底层往上层发送，一直到应用层。当传输到应用层，才算真正接收到由客户端发送过来的HTTP 请求。

发送端在层与层之间传输数据时，每经过一层时必定会被打上一个该层所属的首部信息。反之，接收端在层与层传输数据时，每经过一层时会把对应的首部消去。这种把数据信息包装起来的做法称为封装（encapsulate）。


## 参考文档
1. 《图解HTTP》
